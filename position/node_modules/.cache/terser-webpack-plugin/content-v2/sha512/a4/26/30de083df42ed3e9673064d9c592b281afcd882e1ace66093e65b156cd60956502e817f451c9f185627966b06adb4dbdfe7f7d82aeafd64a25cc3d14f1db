{"code":"require(\"./../../runtime\"),(wx.webpackJsonp=wx.webpackJsonp||[]).push([[3],{5:function(e,t){var a=getApp();Page({data:{longitude:113.32452,latitude:23.099994,mapHeight:\"100vh\",userLicenseAgreementDisplay:!1,boxDisplay:!1,repairFeedbackDisplay:!1,hasUserInfo:!1,disabled:!0,canIUse:wx.canIUse(\"button.open-type.getUserInfo\"),cannotEntery:!0,submitFeedback:[],userInfo:{},markers:[{iconPath:\"../img/mapMarker.png\",id:0,latitude:30.49984,longitude:114.34253,width:30,height:30},{iconPath:\"../img/mapMarker.png\",id:0,latitude:30.489959,longitude:114.401657,width:30,height:30},{iconPath:\"../img/mapMarker.png\",id:0,latitude:30.49514,longitude:114.402185,width:30,height:30}],polyline:[{points:[{latitude:30.49984,longitude:114.34253},{latitude:30.489959,longitude:114.401657},{latitude:30.49514,longitude:114.402185}],color:\"#FF0000DD\",width:2,dottedLine:!0}],items:[{name:\"location\",value:\"校车的定位错误；定位与实际位置偏离\",color:\"red\"},{name:\"state\",value:\"校车颜色标示的状态与校车的实际状态不符\",color:\"red\"},{name:\"number\",value:\"校车车号不对应\",color:\"red\"},{name:\"path\",value:\"路线错误，上车点错误\",color:\"red\"}]},onReady:function(e){var t=this;this.mapCtx=wx.createMapContext(\"myMap\"),wx.getLocation({type:\"gcj02\",success:function(e){var a=e.latitude,n=e.longitude;t.setData({latitude:a,longitude:n})}})},bindGetUserInfo:function(e){var t=this;wx.getSetting({success:function(e){e.authSetting[\"scope.userInfo\"]?(wx.getUserInfo({success:function(e){wx.setStorageSync(\"userInfoStr\",e.userInfo),wx.login({success:function(e){var t=wx.getStorageSync(\"userInfoStr\");if(console.log(t),e.code){var a=t.nickName,n=t.avatarUrl;e.code}else console.log(\"登录失败！\"+e.errMsg)}})}}),wx.setStorageSync(\"userEnter\",!0),t.setData({cannotEntery:!1,userLicenseAgreementDisplay:!0})):console.log(\"用户拒绝登录\")}})},onLoad:function(){var e=this;a.globalData.userInfo?this.setData({userInfo:a.globalData.userInfo,hasUserInfo:!0}):this.data.canIUse?a.userInfoReadyCallback=function(t){e.setData({userInfo:t.userInfo,hasUserInfo:!0})}:wx.getUserInfo({success:function(t){a.globalData.userInfo=t.userInfo,e.setData({userInfo:t.userInfo,hasUserInfo:!0})}})},onShow:function(e){var t=wx.getStorageSync(\"agreement\");wx.getStorageSync(\"userEnter\")?this.setData({cannotEntery:!1,userLicenseAgreementDisplay:!0}):this.setData({cannotEntery:!0,userLicenseAgreementDisplay:!1}),t&&this.setData({userLicenseAgreementDisplay:!1,boxDisplay:!0})},getUserInfo:function(e){console.log(e),a.globalData.userInfo=e.detail.userInfo,this.setData({userInfo:e.detail.userInfo,hasUserInfo:!0})},toAgreement:function(e){wx.navigateTo({url:\"../agreement/agreement\"})},agreemented:function(e){wx.setStorageSync(\"agreement\",!0),this.setData({userLicenseAgreementDisplay:!1,boxDisplay:!0})},repair:function(){this.setData({boxDisplay:!1,repairFeedbackDisplay:!0})},checkboxChange:function(e){console.log(\"checkbox发生change事件，携带value值为：\",e.detail.value),this.setData({submitFeedback:e.detail.value})},submitFeedback:function(e){console.log(this.data.submitFeedback)},repairFeedbackBox:function(){this.setData({repairFeedbackDisplay:!1,boxDisplay:!0})}})}},[[5,0]]]);","extractedComments":[]}